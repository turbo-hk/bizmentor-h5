import{D as t,q as e,p as o,z as a,E as i,G as n,H as s,J as r}from"./index.54cfdbb1.js";const l="https://console.bizmentor.cn/app-api",u="123";var c={NAVIGATE_TO_AUTHED_URL(e){t("authorization")?this.navigateToUrl(e):this.toLogin()},navigateToUrl(t){e({url:t,success:t=>{},fail:t=>{o("log","at config/utils.js:17",t)},complete:()=>{}})},toIndex(){a({url:"/pages/news/list"})},toLogin(){if(!1===this.isWeiXinLogin())return;let t=encodeURIComponent("http://www.bizmentor.cn/pages/home/user/login-page/wx-mp-login/wx-mp-login");o("log","at config/utils.js:36",t),this.getData("/member/auth/social-auth-redirect",{redirectUri:t,type:31,"tenant-id":123},(function(t){o("log","at config/utils.js:42",t),0==t.code&&(window.location.href=decodeURIComponent(t.data))}),(function(){}))},apiHeaders(e){const o=t("authorization");return e?{"tenant-id":u,Authorization:"Bearer "+o,"Content-Type":e}:{"tenant-id":u,Authorization:"Bearer "+o}},hasLogin:()=>(o("log","at config/utils.js:80","haslogin",t("authorization")),o("log","at config/utils.js:81","haslogin",!!t("authorization")),!!t("authorization")),logout(){i()},userInfo(){o("log","at config/utils.js:88","token",t("authorization"));const e=t("loginUser");return o("log","at config/utils.js:90","登录状态",e),!e&&this.hasLogin()&&(o("log","at config/utils.js:92","强制拉取用户信息"),this.getData("/member/user/get",{},(function(t){o("log","at config/utils.js:94",t.data),n("loginUser",t.data)}),(function(){}))),t("loginUser")},postData(t,e,o,a){const i=this.apiHeaders();s({url:l+t,method:"POST",header:i,data:e,success:t=>o(t.data),fail:t=>a(t),complete:()=>{}})},postForm(t,e,o,a){const i=this.apiHeaders("application/x-www-form-urlencoded;charset=utf-8;");s({url:l+t,method:"POST",header:i,data:e,success:t=>o(t.data),fail:t=>a(t),complete:()=>{}})},getData(t,e,o,a){const i=this.apiHeaders();s({url:l+t,method:"GET",header:i,data:e,success:t=>o(t.data),fail:t=>a(t),complete:()=>{}})},isWeiXinLogin:()=>"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i),getPageUrl(){let t=r(),e=t[t.length-1].route,o=t[t.length-1].options,a="";for(let n in o)a+="&"+n+"="+o[n];let i={};return i.curRoute=e,i.curParam=o,i},getUrlParam(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)");let o=window.location.href.split("#")[0].split("?")[1];if(o){var a=o.substr(0).match(e);return null!==a?unescape(a[2]):null}return null},getUserId:()=>t("userId")};export{c as U};
