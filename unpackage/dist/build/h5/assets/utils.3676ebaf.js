import{B as e,p as o,x as t,C as a,D as n,E as i,G as s}from"./index.17d24554.js";const r="https://console.bizmentor.cn/app-api",l="123";var c={NAVIGATE_TO_AUTHED_URL(o){e("authorization")?this.navigateToUrl(o):this.toLogin()},navigateToUrl(e){o({url:e,success:e=>{},fail:e=>{console.log(e)},complete:()=>{}})},toIndex(){t({url:"/pages/news/list"})},toLogin(){let e=encodeURIComponent("http://www.bizmentor.cn/pages/home/user/login-page/wx-mp-login/wx-mp-login");console.log(e),this.getData("/member/auth/social-auth-redirect",{redirectUri:e,type:31,"tenant-id":123},(function(e){console.log(e),0==e.code&&(window.location.href=decodeURIComponent(e.data))}),(function(){}))},apiHeaders(o){const t=e("authorization");return o?{"tenant-id":l,Authorization:"Bearer "+t,"Content-Type":o}:{"tenant-id":l,Authorization:"Bearer "+t}},hasLogin:()=>(console.log("haslogin",e("authorization")),console.log("haslogin",!!e("authorization")),!!e("authorization")),logout(){a()},userInfo(){console.log("token",e("authorization"));const o=e("loginUser");return console.log("登录状态",o),!o&&this.hasLogin()&&(console.log("强制拉取用户信息"),this.getData("/member/user/get",{},(function(e){console.log(e.data),n("loginUser",e.data)}),(function(){}))),e("loginUser")},postData(e,o,t,a){const n=this.apiHeaders();i({url:r+e,method:"POST",header:n,data:o,success:e=>t(e.data),fail:e=>a(e),complete:()=>{}})},postForm(e,o,t,a){const n=this.apiHeaders("application/x-www-form-urlencoded;charset=utf-8;");i({url:r+e,method:"POST",header:n,data:o,success:e=>t(e.data),fail:e=>a(e),complete:()=>{}})},getData(e,o,t,a){const n=this.apiHeaders();i({url:r+e,method:"GET",header:n,data:o,success:e=>t(e.data),fail:e=>a(e),complete:()=>{}})},isWeiXinLogin:()=>"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i),getPageUrl(){let e=s(),o=e[e.length-1].route,t=e[e.length-1].options,a="";for(let i in t)a+="&"+i+"="+t[i];let n={};return n.curRoute=o,n.curParam=t,n},getUrlParam(e){var o=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");let t=window.location.href.split("#")[0].split("?")[1];if(t){var a=t.substr(0).match(o);return null!==a?unescape(a[2]):null}return null}};export{c as U};
