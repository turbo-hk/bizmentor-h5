import{o as t,c as e,w as a,b as l,v as s,n,f as i,a as u,e as d,d as o,t as r,g as c,K as f,p,L as g,M as _,r as h,m,N as y}from"./index.54cfdbb1.js";import{_ as b}from"./uni-dateformat.5859b8d3.js";import{r as w,_ as x}from"./uni-app.es.44a3ee31.js";import{_ as k}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as v,a as C}from"./uni-list.d723e23c.js";import{U as j}from"./utils.f6847d32.js";var W=k({name:"uniCol",props:{span:{type:Number,default:24},offset:{type:Number,default:-1},pull:{type:Number,default:-1},push:{type:Number,default:-1},xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object]},data:()=>({gutter:0,sizeClass:"",parentWidth:0,nvueWidth:0,marginLeft:0,right:0,left:0}),created(){let t=this.$parent;for(;t&&"uniRow"!==t.$options.componentName;)t=t.$parent;this.updateGutter(t.gutter),t.$watch("gutter",(t=>{this.updateGutter(t)}))},computed:{sizeList(){let{span:t,offset:e,pull:a,push:l}=this;return{span:t,offset:e,pull:a,push:l}},pointClassList(){let t=[];return["xs","sm","md","lg","xl"].forEach((e=>{const a=this[e];"number"==typeof a?t.push(`uni-col-${e}-${a}`):"object"==typeof a&&a&&Object.keys(a).forEach((l=>{t.push("span"===l?`uni-col-${e}-${a[l]}`:`uni-col-${e}-${l}-${a[l]}`)}))})),t.join(" ")}},methods:{updateGutter(t){t=Number(t),isNaN(t)||(this.gutter=t/2)}},watch:{sizeList:{immediate:!0,handler(t){let e=[];for(let a in t){const l=t[a];!l&&0!==l||-1===l||e.push("span"===a?`uni-col-${l}`:`uni-col-${a}-${l}`)}this.sizeClass=e.join(" ")}}}},[["render",function(u,d,o,r,c,f){const p=i;return t(),e(p,{class:s(["uni-col",c.sizeClass,f.pointClassList]),style:n({paddingLeft:`${Number(c.gutter)}rpx`,paddingRight:`${Number(c.gutter)}rpx`})},{default:a((()=>[l(u.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])}],["__scopeId","data-v-931355ca"]]);var S=k({name:"uniRow",componentName:"uniRow",props:{type:String,gutter:Number,justify:{type:String,default:"start"},align:{type:String,default:"top"},width:{type:[String,Number],default:750}},created(){},computed:{marginValue(){return this.gutter?-this.gutter/2:0},typeClass(){return"flex"===this.type?"uni-row--flex":""},justifyClass(){return"start"!==this.justify?`uni-row--flex-justify-${this.justify}`:""},alignClass(){return"top"!==this.align?`uni-row--flex-align-${this.align}`:""}}},[["render",function(u,d,o,r,c,f){const p=i;return t(),e(p,{class:s(["uni-row",f.typeClass,f.justifyClass,f.alignClass]),style:n({marginLeft:`${Number(f.marginValue)}rpx`,marginRight:`${Number(f.marginValue)}rpx`})},{default:a((()=>[l(u.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])}],["__scopeId","data-v-4d73f177"]]);var $=k({name:"UniSection",props:{type:{type:String,default:""},title:{type:String,default:""},subTitle:{type:String,default:""}},data:()=>({}),watch:{title(t){uni.report&&""!==t&&uni.report("title",t)}},methods:{onClick(){this.$emit("click")}}},[["render",function(n,f,p,g,_,h){const m=i,y=c;return t(),e(m,{class:"uni-section",nvue:""},{default:a((()=>[p.type?(t(),e(m,{key:0,class:"uni-section__head"},{default:a((()=>[u(m,{class:s([p.type,"uni-section__head-tag"])},null,8,["class"])])),_:1})):d("",!0),u(m,{class:"uni-section__content"},{default:a((()=>[u(y,{class:s([{distraction:!p.subTitle},"uni-section__content-title"])},{default:a((()=>[o(r(p.title),1)])),_:1},8,["class"]),p.subTitle?(t(),e(y,{key:0,class:"uni-section__content-sub"},{default:a((()=>[o(r(p.subTitle),1)])),_:1})):d("",!0)])),_:1}),l(n.$slots,"default",{},void 0,!0)])),_:3})}],["__scopeId","data-v-f28facba"]]);var N=k({data:()=>({id:void 0,title:"",data:{},gutter:0,nvueWidth:730,nodes_abstract_content:"",nodes_content:"",currentPay:"0",sharedUserId:void 0}),onLoad(t){t.id&&(this.id=t.id),t.title&&(this.title=t.title,f({title:t.title})),t.shared&&(this.sharedUserId=t.shared),this.loadOne()},methods:{loadOne(){const t=this;j.getData("/content/detail?id="+t.id+"&pay="+t.currentPay,{},(function(e){t.data=e.data,t.title=e.data.title,t.nodes_content=t.formatRichText(t.data.content),t.nodes_abstract_content=t.formatRichText(t.data.abstractContent),t.initWx()}),(function(){}))},formatRichText:t=>t&&0!=t.length?t=(t=(t=(t=(t=(t=(t=(t=t.replace(/&quot;/g,'"')).replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&nbsp;/g," ")).replace(/<p/gi,'<p class="p_class" ')).replace(/<span/gi,'<span class="span_class" ')).replace(/<img/gi,'<img class="img_class" '):t,pay(){if(!j.hasLogin())return void j.toLogin();const t=this;j.postData("/content/pay/create",{id:t.id,channelId:18,sharedMemberUserId:t.sharedUserId},(function(e){if(p("log","at pages/news/detail.vue:235",e),0===e.code){const a=e.data.payOrderId,l=j.userInfo().openId;p("log","at pages/news/detail.vue:239","openid",l,"payOrderId",a),j.postData("/pay/order/submit",{channelCode:"wx_pub",channelExtras:{openid:l},id:a},(function(e){p("log","at pages/news/detail.vue:247",e.data);const a=e.data.invokeResponse;jWeixin.chooseWXPay({timestamp:a.timeStamp,nonceStr:a.nonceStr,package:a.packageValue,signType:a.signType,paySign:a.paySign,success:function(e){t.currentPay="1",setTimeout((()=>{t.loadOne()}),1e3)}})}),(function(){}))}}),(function(){}))},footerClick(t){if("1"===t)return console.log(),void this.wxAppShareCore();g({title:t,icon:"none"})},initWx(){const t=this;let e=location.href;j.postForm("/member/wx-mp/create-jsapi-signature",{url:e},(function(e){t.init(e.data)}),(function(){}))},init(t){let e=this;p("log","at pages/news/detail.vue:296",t),jWeixin.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["chooseWXPay","updateAppMessageShareData","updateTimelineShareData"]}),jWeixin.ready((function(){p("log","at pages/news/detail.vue:308","微信支付验证通过"),e.wxAppShareCore()})),jWeixin.error((function(t){p("log","at pages/news/detail.vue:313","微信验证失败",t)})),jWeixin.checkJsApi({jsApiList:["chooseWXPay","updateAppMessageShareData","updateTimelineShareData"],success:function(t){p("log","at pages/news/detail.vue:322","微信检测JS接口结果",t)}})},wxAppShareCore(){j.getUserId();const t={title:this.data.title,desc:this.data.abstractContent.replace(/<[^<>]+>/g,""),link:window.location.href,img:this.data.thumbnailImage};p("log","at pages/news/detail.vue:336",t),jWeixin.updateAppMessageShareData({title:t.title,desc:t.desc,link:t.link,imgUrl:t.img,success:function(){p("log","at pages/news/detail.vue:344","设置微信好友分享成功")},fail:function(t){p("log","at pages/news/detail.vue:347","设置微信好友分享失败",t)}}),jWeixin.updateTimelineShareData({title:t.title,desc:t.desc,link:t.link,imgUrl:t.img,success:function(){p("log","at pages/news/detail.vue:358","设置微信好友分享成功")},fail:function(t){p("log","at pages/news/detail.vue:361","设置微信好友分享失败",t)}})}}},[["render",function(l,s,n,f,p,g){const k=i,j=c,N=w(h("uni-dateformat"),b),T=w(h("uni-col"),W),I=w(h("uni-row"),S),A=m,L=w(h("uni-list-item"),v),z=w(h("uni-section"),$),O=y,M=w(h("uni-list"),C),D=w(h("uni-icons"),x);return t(),e(k,{class:"article"},{default:a((()=>[u(k,{class:"article-title"},{default:a((()=>[o(r(p.title),1)])),_:1}),p.data?(t(),e(M,{key:0,border:!1},{default:a((()=>[u(L,null,{body:a((()=>[u(k,{class:"header-content"},{default:a((()=>[u(I,{gutter:p.gutter,width:p.nvueWidth,class:"title-content"},{default:a((()=>[p.data.channel?(t(),e(T,{key:0,span:23,offset:1},{default:a((()=>[u(j,null,{default:a((()=>[o("频道: "+r(p.data.channel.label)+"  ",1)])),_:1}),u(j,null,{default:a((()=>[o("日期: "),u(N,{date:p.data.bizTime,format:"yyyy年MM月dd日"},null,8,["date"]),o("    ")])),_:1}),u(j,null,{default:a((()=>[o("阅读: "+r(p.data.readCount)+"   ",1)])),_:1}),u(j,null,{default:a((()=>[o("点赞: "+r(p.data.likesCount)+"   ",1)])),_:1})])),_:1})):d("",!0)])),_:1},8,["gutter","width"]),u(I,{gutter:p.gutter,width:p.nvueWidth,class:"text-center author"},{default:a((()=>[u(T,{span:24},{default:a((()=>[u(j,null,{default:a((()=>[o("作者："+r(p.data.author),1)])),_:1})])),_:1})])),_:1},8,["gutter","width"]),u(k,{class:"title-image-div"},{default:a((()=>[u(A,{mode:"widthFix",src:"/assets/title.5bb75304.png"})])),_:1}),p.data.industry?(t(),e(I,{key:0,gutter:p.gutter,width:p.nvueWidth},{default:a((()=>[u(T,{span:10,offset:1},{default:a((()=>[u(j,null,{default:a((()=>[o("行业分类：")])),_:1})])),_:1}),u(T,{span:12},{default:a((()=>[u(j,null,{default:a((()=>[o(r(p.data.industry.label),1)])),_:1})])),_:1})])),_:1},8,["gutter","width"])):d("",!0),p.data.region?(t(),e(I,{key:1,gutter:p.gutter,width:p.nvueWidth},{default:a((()=>[u(T,{span:10,offset:1},{default:a((()=>[u(j,null,{default:a((()=>[o("适用区域：")])),_:1})])),_:1}),u(T,{span:12},{default:a((()=>[u(j,null,{default:a((()=>[o(r(p.data.region),1)])),_:1})])),_:1})])),_:1},8,["gutter","width"])):d("",!0),p.data.startAmount&&0==p.data.startAmount.isEmpty?(t(),e(I,{key:2,gutter:p.gutter,width:p.nvueWidth},{default:a((()=>[u(T,{span:10,offset:1},{default:a((()=>[u(j,null,{default:a((()=>[o("启动资金：")])),_:1})])),_:1}),u(T,{span:12},{default:a((()=>[u(j,null,{default:a((()=>[o(r(p.data.startAmount.min)+"～"+r(p.data.startAmount.max)+" 元",1)])),_:1})])),_:1})])),_:1},8,["gutter","width"])):d("",!0),p.data.income&&0==p.data.income.isEmpty?(t(),e(I,{key:3,gutter:p.gutter,width:p.nvueWidth},{default:a((()=>[u(T,{span:10,offset:1},{default:a((()=>[u(j,null,{default:a((()=>[o("月收入预期：")])),_:1})])),_:1}),u(T,{span:12},{default:a((()=>[u(j,null,{default:a((()=>[o(r(p.data.income.min)+" ～ "+r(p.data.income.max)+" 元",1)])),_:1})])),_:1})])),_:1},8,["gutter","width"])):d("",!0),p.data.payBackm&&0==p.data.payBackm.isEmpty?(t(),e(I,{key:4,gutter:p.gutter,width:p.nvueWidth},{default:a((()=>[u(T,{span:10,offset:1},{default:a((()=>[u(j,null,{default:a((()=>[o("投资回报周期：")])),_:1})])),_:1}),u(T,{span:12},{default:a((()=>[u(j,null,{default:a((()=>[o(r(p.data.payBack.min)+" ～ "+r(p.data.payBack.max)+" 个月",1)])),_:1})])),_:1})])),_:1},8,["gutter","width"])):d("",!0),p.data.operationMode&&p.data.operationMode.label?(t(),e(I,{key:5,gutter:p.gutter,width:p.nvueWidth},{default:a((()=>[u(T,{span:10,offset:1},{default:a((()=>[u(j,null,{default:a((()=>[o("运作模式：")])),_:1})])),_:1}),u(T,{span:12},{default:a((()=>[u(j,null,{default:a((()=>[o(r(p.data.operationMode.label),1)])),_:1})])),_:1})])),_:1},8,["gutter","width"])):d("",!0),p.data.skilled&&p.data.skilled.label?(t(),e(I,{key:6,gutter:p.gutter,width:p.nvueWidth},{default:a((()=>[u(T,{span:10,offset:1},{default:a((()=>[u(j,null,{default:a((()=>[o("行业经验和技能要求：")])),_:1})])),_:1}),u(T,{span:12},{default:a((()=>[u(j,null,{default:a((()=>[o(r(p.data.skilled.label),1)])),_:1})])),_:1})])),_:1},8,["gutter","width"])):d("",!0),p.data.caseType&&p.data.caseType.label?(t(),e(I,{key:7,gutter:p.gutter,width:p.nvueWidth},{default:a((()=>[u(T,{span:10,offset:1},{default:a((()=>[u(j,null,{default:a((()=>[o("案例类型：")])),_:1})])),_:1}),u(T,{span:12},{default:a((()=>[u(j,null,{default:a((()=>[o(r(p.data.caseType.label),1)])),_:1})])),_:1})])),_:1},8,["gutter","width"])):d("",!0),p.data.caseYear?(t(),e(I,{key:8,gutter:p.gutter,width:p.nvueWidth},{default:a((()=>[u(T,{span:10,offset:1},{default:a((()=>[u(j,null,{default:a((()=>[o("案例发生时间：")])),_:1})])),_:1}),u(T,{span:12},{default:a((()=>[u(j,null,{default:a((()=>[o(r(p.data.caseYear)+" 年",1)])),_:1})])),_:1})])),_:1},8,["gutter","width"])):d("",!0),p.data.courseType&&p.data.courseType.label?(t(),e(I,{key:9,gutter:p.gutter,width:p.nvueWidth},{default:a((()=>[u(T,{span:10,offset:1},{default:a((()=>[u(j,null,{default:a((()=>[o("干货类型：")])),_:1})])),_:1}),u(T,{span:12},{default:a((()=>[u(j,null,{default:a((()=>[o(r(p.data.courseType.label),1)])),_:1})])),_:1})])),_:1},8,["gutter","width"])):d("",!0),p.data.technical&&p.data.technical.label?(t(),e(I,{key:10,gutter:p.gutter,width:p.nvueWidth},{default:a((()=>[u(T,{span:10,offset:1},{default:a((()=>[u(j,null,{default:a((()=>[o("技能储备要求：")])),_:1})])),_:1}),u(T,{span:12},{default:a((()=>[u(j,null,{default:a((()=>[o(r(p.data.technical.label),1)])),_:1})])),_:1})])),_:1},8,["gutter","width"])):d("",!0)])),_:1})])),_:1}),u(k,{class:"content-title"},{default:a((()=>[u(z,{title:"摘要",type:"line"})])),_:1}),p.data.abstractContent?(t(),e(L,{key:0,border:!1},{body:a((()=>[u(k,{class:"content-body"},{default:a((()=>[u(O,{type:"text",nodes:p.nodes_abstract_content},null,8,["nodes"])])),_:1})])),_:1})):d("",!0),u(k,{class:"content-title"},{default:a((()=>[u(z,{title:"正文",type:"line"})])),_:1}),u(L,{border:!1},{body:a((()=>[u(k,{class:"content-body"},{default:a((()=>[u(k,null,{default:a((()=>[u(O,{type:"text",nodes:p.nodes_content},null,8,["nodes"]),0===p.data.makePublic?(t(),e(k,{key:0,class:"hide-preCode-box",onClick:g.pay},{default:a((()=>[u(k,{class:"pay-message-text"},{default:a((()=>[u(j,null,{default:a((()=>[o(" “成功创业需要投资”")])),_:1})])),_:1}),u(k,{class:"pay-message-text"},{default:a((()=>[u(j,null,{default:a((()=>[o("投资¥"+r(p.data.readIncome)+"元，阅读全文 >> ",1)])),_:1})])),_:1})])),_:1},8,["onClick"])):d("",!0)])),_:1}),0===p.data.makePublic?(t(),e(k,{key:0,class:"pay-message"},{default:a((()=>[u(k,{class:"uni-flex uni-column share-area"},{default:a((()=>[u(k,{class:"flex-item flex-item-V"},{default:a((()=>[u(j,{class:"pay-message-text"},{default:a((()=>[o("你也可以分享你的项目来赚钱！")])),_:1})])),_:1}),u(k,{class:"flex-item flex-item-V"},{default:a((()=>[u(j,{class:"pay-message-text",click:g.wxAppShareCore},{default:a((()=>[o("立即去分享")])),_:1},8,["click"])])),_:1})])),_:1})])),_:1})):d("",!0)])),_:1})])),_:1})])),_:1})):d("",!0),u(k,{class:"footer"},{default:a((()=>[u(k,{onClick:s[0]||(s[0]=_((t=>g.footerClick("1")),["stop"]))},{default:a((()=>[u(j,{class:"footer-box__item"},{default:a((()=>[u(D,{"custom-prefix":"iconfont",type:"icon-zhuanfa",size:"20"}),o(" 转发 ")])),_:1})])),_:1}),u(k,{onClick:s[1]||(s[1]=_((t=>g.footerClick("收藏")),["stop"]))},{default:a((()=>[u(j,{class:"footer-box__item"},{default:a((()=>[u(D,{"custom-prefix":"iconfont",type:"icon-wechatEnshrine",size:"20"}),o(" 收藏 ")])),_:1})])),_:1}),u(k,{onClick:s[2]||(s[2]=_((t=>g.footerClick("点赞")),["stop"]))},{default:a((()=>[u(j,{class:"footer-box__item"},{default:a((()=>[u(D,{"custom-prefix":"iconfont",type:"icon-dianzan",size:"20"}),o(" 点赞 ")])),_:1})])),_:1}),u(k,{onClick:s[3]||(s[3]=_((t=>g.footerClick("暂未开通")),["stop"]))},{default:a((()=>[u(j,{class:"footer-box__item"},{default:a((()=>[u(D,{"custom-prefix":"iconfont",type:"icon-pinglun",size:"20"}),o(" 评论 ")])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-54ace26f"]]);export{N as default};
