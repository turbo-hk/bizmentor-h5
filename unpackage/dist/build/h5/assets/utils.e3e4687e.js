import{C as t,q as a,p as o,y as e,D as i,E as s,G as n,H as r}from"./index.5c7ed4f2.js";const l="http://192.168.31.33:48080/app-api",c="123",u={NAVIGATE_TO_AUTHED_URL(a){t("authorization")?this.navigateToUrl(a):this.toLogin()},navigateToUrl(t){a({url:t,success:t=>{},fail:t=>{o("log","at config/utils.js:18",t)},complete:()=>{}})},toIndex(){e({url:"/pages/news/list"})},toLogin(){let t=encodeURIComponent(window.location.href);u.getData("/member/auth/social-auth-redirect",{redirectUri:t,type:31,"tenant-id":123},(function(t){o("log","at config/utils.js:38",t),0==t.code&&(window.location.href=t.data)}),(function(){}))},apiHeaders(a){const o=t("authorization");return a?{"tenant-id":c,Authorization:"Bearer "+o,"Content-Type":a}:{"tenant-id":c,Authorization:"Bearer "+o}},hasLogin:()=>(o("log","at config/utils.js:62","haslogin",t("authorization")),o("log","at config/utils.js:63","haslogin",!!t("authorization")),!!t("authorization")),logout(){i()},userInfo(){o("log","at config/utils.js:70","token",t("authorization"));const a=t("loginUser");return o("log","at config/utils.js:72","登录状态",a),!a&&this.hasLogin()&&(o("log","at config/utils.js:74","强制拉取用户信息"),this.getData("/member/user/get",{},(function(t){o("log","at config/utils.js:76",t.data),s("loginUser",t.data)}),(function(){}))),t("loginUser")},postData(t,a,o,e){const i=this.apiHeaders();n({url:l+t,method:"POST",header:i,data:a,success:t=>o(t.data),fail:t=>e(t),complete:()=>{}})},postForm(t,a,o,e){const i=this.apiHeaders("application/x-www-form-urlencoded;charset=utf-8;");n({url:l+t,method:"POST",header:i,data:a,success:t=>o(t.data),fail:t=>e(t),complete:()=>{}})},getData(t,a,o,e){const i=this.apiHeaders();n({url:l+t,method:"GET",header:i,data:a,success:t=>o(t.data),fail:t=>e(t),complete:()=>{}})},isWeiXinLogin:()=>"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i),getPageUrl(){let t=r(),a=t[t.length-1].route,o=t[t.length-1].options,e="";for(let s in o)e+="&"+s+"="+o[s];let i={};return i.curRoute=a,i.curParam=o,i}};var g=u;export{g as U};
